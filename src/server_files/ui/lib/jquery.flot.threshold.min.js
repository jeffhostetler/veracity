(function(b){var a={series:{threshold:null}};function c(e){function f(B,u,g,t,A){var z=g.pointsize,D,q,o,v,C,r=b.extend({},u);r.datapoints={points:[],pointsize:z,format:g.format};r.label=null;r.color=A;r.threshold=null;r.originSeries=u;r.data=[];var k=g.points,h=u.lines.show;var l=[];var n=[];var w;for(D=0;D<k.length;D+=z){q=k[D];o=k[D+1];C=v;if(o<t){v=l}else{v=n}if(h&&C!=v&&q!=null&&D>0&&k[D-z]!=null){var j=(q-k[D-z])/(o-k[D-z+1])*(t-o)+q;C.push(j);C.push(t);for(w=2;w<z;++w){C.push(k[D+w])}v.push(null);v.push(null);for(w=2;w<z;++w){v.push(k[D+w])}v.push(j);v.push(t);for(w=2;w<z;++w){v.push(k[D+w])}}v.push(q);v.push(o);for(w=2;w<z;++w){v.push(k[D+w])}}g.points=n;r.datapoints.points=l;if(r.datapoints.points.length>0){B.getData().push(r)}}function d(i,g,h){if(!g.threshold){return}if(g.threshold instanceof Array){g.threshold.sort(function(k,j){return k.below-j.below});b(g.threshold).each(function(j,k){f(i,g,h,k.below,k.color)})}else{f(i,g,h,g.threshold.below,g.threshold.color)}}e.hooks.processDatapoints.push(d)}b.plot.plugins.push({init:c,options:a,name:"threshold",version:"1.2"})})(jQuery);